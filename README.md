# 电影推荐系统
基于 MovieLens 数据集构建的 "召回 - 排序" 两阶段电影推荐系统，通过 ItemCF 协同过滤挖掘用户兴趣，结合 LightGBM 与 XGBoost 实现精准排序，解决海量电影资源下的个性化推荐问题。

## 项目概述
本项目实现了一个完整的电影推荐系统，采用业界主流的"召回-排序"两阶段架构。系统首先通过混合召回策略从海量电影中筛选候选集，然后使用机器学习模型对候选集进行精准排序，最终为用户生成个性化推荐列表。

## 系统架构
    数据层 → 特征层 → 召回层 → 排序层 → 评估层
    召回层：融合 3 种策略（ItemCF 近期兴趣、ItemCF 长期兴趣、热门电影），从 9724 部电影中筛选 50 个候选集
    排序层：基于多维度特征训练双模型，对候选集精准排序，输出 Top10 推荐结果

## 核心功能
    数据预处理
    支持 MovieLens 数据集加载
    
    按用户划分 8:2 训练/测试集
    
    包含文件缺失、格式错误等异常处理
    
    探索性数据分析（EDA）
    自动生成评分分布可视化
    
    用户/电影评分数量分布分析
    
    数据稀疏性评估

## 特征工程
电影特征：类型独热编码、上映年份、评分统计（平均分、评分数量、标准差）

用户特征：评分行为统计（平均分、评分数量、标准差）

## 混合召回策略
    ItemCF 近期兴趣召回：基于用户最近交互的10部电影
    
    ItemCF 长期兴趣召回：基于用户历史交互的所有电影
    
    热门电影召回：作为新用户冷启动的兜底策略

## 双模型排序
    LightGBM：采用直方图优化，训练速度快
    
    XGBoost：精确贪心算法，在小数据上表现优异

## 性能评估
    NDCG@10：评估排序质量（0-1，越接近1越好）
    
    Recall@10：评估推荐覆盖率
    
    命中数：实际被用户观看的推荐电影总数
    
    训练时间：模型训练效率对比

## 实验结果
    模型	NDCG@10	Recall@10	命中电影数	训练时间
    LightGBM	0.7599	0.0728	444	0.709s
    XGBoost	0.7616	0.0802	489	2.289s
## 结果分析
    XGBoost在排序质量上略优：NDCG@10和Recall@10指标均稍高于LightGBM
    
    LightGBM训练速度更快：得益于直方图优化算法，训练时间较快


## 使用示例
生成推荐结果
系统默认会为测试集中的所有用户生成推荐结果，并输出评估指标：

    user_id = 1  # 为用户ID为1的用户生成推荐
    recommendations = recommender.get_recommendations(user_id)
    print(f"为用户{user_id}推荐的电影：")
    for i, movie_id in enumerate(recommendations, 1):
        print(f"{i}. 电影ID: {movie_id}")
    自定义配置
    在 config.py 中可以调整系统参数：
    
    召回数量配置
    RECALL_NUM = 50          # 召回候选集大小
    RECENT_LAST_N = 10       # 近期交互电影数量
    HOT_TOP_N = 200          # 热门电影数量
    
    模型参数配置
    LIGHTGBM_PARAMS = {
        'learning_rate': 0.05,
        'num_leaves': 31,
        'min_data_in_leaf': 20
    }
